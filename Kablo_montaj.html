<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kablo Montaj Büküm ve Metraj Hesaplayıcı</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React ve ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        .card-shadow { box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        .input-group:focus-within label { color: #2563eb; }
        .input-group:focus-within input { border-color: #2563eb; ring: 2px; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Ikonları Inline SVG Bileşenleri olarak tanımlıyoruz
        const Ruler = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0l12.6 12.6z"></path>
                <line x1="13" y1="6" x2="19" y2="12"></line>
                <line x1="16" y1="3" x2="22" y2="9"></line>
                <line x1="7" y1="12" x2="13" y2="18"></line>
            </svg>
        );

        const Activity = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
            </svg>
        );

        const Info = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="16" x2="12" y2="12"></line>
                <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
        );

        const CornerDownRight = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polyline points="15 10 20 15 15 20"></polyline>
                <path d="M4 4v7a4 4 0 0 0 4 4h12"></path>
            </svg>
        );

        function App() {
            // Inputs - Mesafe varsayılan değerini mm mantığına uygun (1000mm = 1m) olarak güncelledim
            const [distance, setDistance] = useState(1000); // mm
            const [area, setArea] = useState(2.5); // mm2
            const [cableType, setCableType] = useState('pvc'); // pvc, xlpe, armoured
            const [slackPercent, setSlackPercent] = useState(3); // % tolerans

            const [results, setResults] = useState(null);

            // Kablo Kesitine göre yaklaşık Dış Çap Tahmini (mm)
            const estimateDiameter = (mm2) => {
                const conductorDiameter = 2 * Math.sqrt(mm2 / Math.PI);
                let insulationFactor = 1.6; 
                if (mm2 > 10) insulationFactor = 1.4;
                if (mm2 > 50) insulationFactor = 1.3;
                return conductorDiameter * insulationFactor;
            };

            const calculate = () => {
                // 1. Dış Çap Tahmini
                let diameter = estimateDiameter(area);
                if (cableType === 'armoured') diameter *= 1.25;

                // 2. Minimum Bükülme Yarıçapı (R) Hesaplama
                let bendMultiplier = 8;
                if (cableType === 'armoured') bendMultiplier = 12;
                if (cableType === 'xlpe') bendMultiplier = 10;
                
                const minBendRadius = diameter * bendMultiplier;

                // 3. Gerçek Boy Hesaplama (Artık girdi mm olduğu için sonuç da mm olacak)
                const toleranceMultiplier = 1 + (slackPercent / 100);
                const realLength = distance * toleranceMultiplier;
                const extraLength = realLength - distance;

                setResults({
                    diameter: diameter.toFixed(1),
                    minBendRadius: minBendRadius.toFixed(0),
                    minBendRadiusCm: (minBendRadius / 10).toFixed(1),
                    realLength: realLength.toFixed(0), // mm olduğu için ondalığa gerek yok
                    extraLength: extraLength.toFixed(0),
                    bendMultiplier
                });
            };

            useEffect(() => {
                calculate();
            }, [distance, area, cableType, slackPercent]);

            // Görselleştirme Bileşeni
            const BendVisualization = () => {
                if (!results) return null;
                const r = 80;
                const strokeWidth = Math.min(20, Math.max(4, area / 2));

                return (
                    <div className="mt-6 border rounded-xl p-4 bg-white flex flex-col items-center">
                        <h4 className="text-sm font-semibold text-gray-500 mb-4">Bükülme Yarıçapı Simülasyonu</h4>
                        <svg width="250" height="180" viewBox="0 0 250 180">
                            <path d="M20,20 L20,130 A 20,20 0 0,0 40,150 L230,150" 
                                  fill="none" stroke="#e5e7eb" strokeWidth="40" strokeLinecap="square" />
                            <text x="50" y="145" fontSize="10" fill="#9ca3af">Kablo Kanalı / Duvar</text>

                            <path d={`M20,20 L20,${150-r} Q20,150 ${20+r},150 L230,150`} 
                                  fill="none" stroke="#ef4444" strokeWidth={strokeWidth} strokeLinecap="round" />
                            
                            <line x1="20" y1="150" x2={20+r/1.5} y2={150-r/1.5} stroke="#3b82f6" strokeWidth="1" strokeDasharray="4"/>
                            <text x="45" y={140 - r/3} fontSize="12" fontWeight="bold" fill="#3b82f6">R_min</text>
                            <text x="45" y={155 - r/3} fontSize="10" fill="#3b82f6">{results.minBendRadius} mm</text>
                        </svg>
                        <p className="text-xs text-center text-gray-500 mt-2 max-w-xs">
                            Kırmızı çizgi kablodur. Mavi "R_min", kabloyu kırmadan yapabileceğiniz en keskin dönüşü gösterir.
                        </p>
                    </div>
                );
            };

            return (
                <div className="min-h-screen flex flex-col items-center p-4 md:p-8">
                    <header className="mb-8 text-center max-w-2xl">
                        <h1 className="text-3xl font-bold text-slate-800 mb-2">Kablo Montaj Hesaplayıcı</h1>
                        <p className="text-slate-600">Kesit alanına göre bükülme yarıçapı ve montaj toleranslı metraj hesabı (mm).</p>
                    </header>

                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 w-full max-w-5xl">
                        
                        {/* GİRDİ PANELİ */}
                        <div className="bg-white p-6 rounded-2xl card-shadow border border-slate-100 h-fit">
                            <h2 className="text-lg font-semibold text-slate-700 mb-6 flex items-center gap-2">
                                <span className="bg-blue-100 p-2 rounded-lg text-blue-600"><Ruler size={20}/></span>
                                Kablo Bilgileri
                            </h2>

                            {/* Mesafe */}
                            <div className="mb-5">
                                <label className="block text-sm font-medium text-slate-700 mb-1">İki Nokta Arası Mesafe (mm)</label>
                                <div className="relative">
                                    <input 
                                        type="number" 
                                        value={distance} 
                                        onChange={(e) => setDistance(parseFloat(e.target.value) || 0)}
                                        className="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition"
                                    />
                                    <span className="absolute right-4 top-3.5 text-slate-400 text-sm">mm</span>
                                </div>
                            </div>

                            {/* Kesit Alanı */}
                            <div className="mb-5">
                                <label className="block text-sm font-medium text-slate-700 mb-1">Kablo Kesit Alanı (mm²)</label>
                                <div className="grid grid-cols-4 gap-2 mb-2">
                                    {[1.5, 2.5, 4, 6, 10, 16, 25, 35].map(val => (
                                        <button 
                                            key={val}
                                            onClick={() => setArea(val)}
                                            className={`py-2 px-1 text-sm rounded-lg border transition ${area === val ? 'bg-blue-600 text-white border-blue-600' : 'bg-white text-slate-600 border-slate-200 hover:bg-slate-50'}`}
                                        >
                                            {val}
                                        </button>
                                    ))}
                                </div>
                                <div className="relative">
                                    <input 
                                        type="number" 
                                        value={area} 
                                        onChange={(e) => setArea(parseFloat(e.target.value) || 0)}
                                        className="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition"
                                        placeholder="Özel değer girin..."
                                    />
                                    <span className="absolute right-4 top-3.5 text-slate-400 text-sm">mm²</span>
                                </div>
                            </div>

                            {/* Kablo Tipi */}
                            <div className="mb-5">
                                <label className="block text-sm font-medium text-slate-700 mb-1">Kablo Tipi</label>
                                <select 
                                    value={cableType}
                                    onChange={(e) => setCableType(e.target.value)}
                                    className="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"
                                >
                                    <option value="pvc">Standart PVC / NYM (En yaygın)</option>
                                    <option value="xlpe">XLPE / Endüstriyel</option>
                                    <option value="armoured">Çelik Zırhlı (Armoured)</option>
                                </select>
                            </div>

                            {/* Tolerans */}
                            <div>
                                <label className="block text-sm font-medium text-slate-700 mb-1 flex justify-between">
                                    <span>Montaj Payı (Sarkma & Dönüşler)</span>
                                    <span className="text-blue-600 font-bold">%{slackPercent}</span>
                                </label>
                                <input 
                                    type="range" 
                                    min="0" 
                                    max="20" 
                                    value={slackPercent} 
                                    onChange={(e) => setSlackPercent(parseInt(e.target.value))}
                                    className="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-blue-600"
                                />
                                <p className="text-xs text-slate-400 mt-1">Standart montajlar için %3-%5 önerilir.</p>
                            </div>
                        </div>

                        {/* SONUÇ PANELİ */}
                        <div className="flex flex-col gap-4">
                            {results && (
                                <>
                                    {/* Ana Sonuç Kartı */}
                                    <div className="bg-white p-6 rounded-2xl card-shadow border-t-4 border-blue-600">
                                        <h2 className="text-lg font-semibold text-slate-700 mb-6 flex items-center gap-2">
                                            <span className="bg-green-100 p-2 rounded-lg text-green-600"><Activity size={20}/></span>
                                            Hesaplanan Değerler
                                        </h2>

                                        <div className="grid grid-cols-2 gap-4 mb-6">
                                            {/* Bükülme Yarıçapı */}
                                            <div className="col-span-2 bg-blue-50 p-4 rounded-xl border border-blue-100 flex items-center justify-between">
                                                <div>
                                                    <p className="text-blue-600 text-xs font-bold uppercase tracking-wider mb-1">Min. Bükülme Yarıçapı</p>
                                                    <p className="text-3xl font-bold text-slate-800">{results.minBendRadius} <span className="text-lg text-slate-500 font-normal">mm</span></p>
                                                    <p className="text-xs text-slate-500">({results.minBendRadiusCm} cm)</p>
                                                </div>
                                                <div className="text-right">
                                                    <p className="text-xs text-slate-400">Tahmini Çap: {results.diameter} mm</p>
                                                    <p className="text-xs text-slate-400">Çarpan: {results.bendMultiplier}x</p>
                                                </div>
                                            </div>

                                            {/* Gerçek Boy */}
                                            <div className="col-span-2 bg-slate-800 text-white p-5 rounded-xl shadow-lg">
                                                <p className="text-slate-300 text-xs font-bold uppercase mb-1">Satın Alınması Gereken Boy</p>
                                                <div className="flex items-baseline gap-2">
                                                    <span className="text-4xl font-bold">{results.realLength}</span>
                                                    <span className="text-xl opacity-80">mm</span>
                                                </div>
                                                <div className="mt-3 pt-3 border-t border-slate-600 flex justify-between text-xs text-slate-300">
                                                    <span>Net Mesafe: {distance} mm</span>
                                                    <span>Ek Pay: +{results.extraLength} mm</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div className="text-xs text-slate-500 bg-slate-50 p-3 rounded-lg border border-slate-100 flex gap-2">
                                            <Info size={16} className="shrink-0 text-blue-500"/>
                                            <p>
                                                <strong>Uyarı:</strong> Kabloyu {results.minBendRadius} mm'den daha dar bir kavisle dönerseniz, içindeki damarlar zarar görebilir.
                                            </p>
                                        </div>
                                    </div>

                                    <BendVisualization />
                                </>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
